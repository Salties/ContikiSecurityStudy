#!/usr/bin/python

import sys

class record:
	count = 0;
	def __init__(self, packet_id, packet_dump):
	self.seqno = packet_id;
	segments = packet_dump.split();
	# A captured packet of cooja is of the form:
    # 'Time'+'Src_ID'+'Dts_ID'+'Length'+'Mac_Protocol'+'Type'+'Src_Addr'+'Dst_Addr'...
    self.time = segments[0];
    self.srcid = segments[1];
    self.dstid = segments[2];
    self.length = segments[3];
    print "A new record.";
    count += 1;
    return;
        
    def __del__(self):
        print "Record deleted."
        count -= 1;
        return;

if len(sys.argv) <= 1:
	print "Usage: extractri.py [cooja logfile]";
	exit();

#Open a cooja radio log specified by command line argument.
logfilename = sys.argv[1];
logfile = open(logfilename, 'r');

records = {};
while True:
    # Read a packet from the log line by line.
    newline = logfile.readline();
    if not newline: 
        break; #EOF
    #Stores the packet dump in records[].    
    records[i] = record(i, newline);
    i += 1;

for j < i:
    print records[j].time;
    j += 1;

exit();
